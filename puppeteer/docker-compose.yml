version: '3.2'
services:
  app:
    # NOTE: service configured in the file ../app/docker-compose.yml

  tests:
    build: ../puppeteer/
    volumes:
      - ../puppeteer:/usr/src/app/
      - ../puppeteer/screenshots/:/usr/src/app/screenshots/
      # data vol to store node_modules
      - /usr/src/app/node_modules
    command: "wait-for-it.sh app:8080 -- npm test integration-tests/"
    depends_on:
      - app
    environment:
      - USERNAME_ADMIN
      - PASSWORD_ADMIN
